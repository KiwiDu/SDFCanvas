{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"C:\\\\Users\\\\kiwid\\\\Documents\\\\FrontendPlayground\\\\SDFCanvas\\\\ts\\\\geo\\\\matrix.ts\",\"C:\\\\Users\\\\kiwid\\\\Documents\\\\FrontendPlayground\\\\SDFCanvas\\\\ts\\\\geo\\\\geomath.ts\",\"C:\\\\Users\\\\kiwid\\\\Documents\\\\FrontendPlayground\\\\SDFCanvas\\\\ts\\\\geo\\\\shapes.ts\",\"C:\\\\Users\\\\kiwid\\\\Documents\\\\FrontendPlayground\\\\SDFCanvas\\\\ts\\\\geo\\\\pack.ts\",\"C:\\\\Users\\\\kiwid\\\\Documents\\\\FrontendPlayground\\\\SDFCanvas\\\\ts\\\\index.ts\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"Matrix\",\"[object Object]\",\"a1\",\"a2\",\"a3\",\"b1\",\"b2\",\"b3\",\"c1\",\"c2\",\"n3\",\"this\",\"data\",\"Float64Array\",\"arguments\",\"nums\",\"vals\",\"length\",\"dx\",\"dy\",\"angle\",\"Math\",\"cos\",\"sin\",\"ratio\",\"pos\",\"console\",\"log\",\"det\",\"adjugateMatrix\",\"divideByNumber\",\"result\",\"k\",\"j\",\"toString\",\"sign\",\"minor\",\"cofactor\",\"tgt\",\"dotProduct\",\"row\",\"col\",\"make\",\"num\",\"map\",\"ele\",\"a\",\"b\",\"len\",\"sqrt\",\"x\",\"y\",\"dis_sqr\",\"dis\",\"Unit\",\"Shape\",\"id\",\"sdf\",\"Dot\",\"super\",\"origin\",\"Vector\",\"_b\",\"_e\",\"shapes_Segment\",\"_way\",\"toDot\",\"op\",\"opr\",\"dis1_sqr\",\"dis2_sqr\",\"len_sqr\",\"min\",\"abs\",\"shapes_Line\",\"_dd\",\"A\",\"B\",\"C\",\"takein\",\"_da\",\"form\",\"_kb\",\"shapes_Capsule\",\"segment\",\"radius\",\"helper\",\"center\",\"_\",\"threshold\",\"x1\",\"x2\",\"val\",\"max\",\"ts_Coordinate\",\"ctx\",\"width\",\"height\",\"w\",\"h\",\"fillStyle\",\"fillRect\",\"floor\",\"weight\",\"step\",\"absX\",\"absY\",\"half_w\",\"half_h\",\"relX\",\"relY\",\"shapes\",\"getImageData\",\"pixels\",\"shape\",\"toRelXY\",\"ret\",\"blend_pixel\",\"Color\",\"putImageData\",\"axis\",\"Uint8ClampedArray\",\"fill_pixel\",\"color\",\"R\",\"G\",\"alpha\",\"getCanvas\",\"cvs_id\",\"document\",\"getElementById\",\"painter\",\"cvs\",\"getContext\",\"imageSmoothingEnabled\",\"init_canvas\",\"shape_list\",\"push\",\"addEventListener\",\"url\",\"toDataURL\",\"save\",\"renderSDF\",\"main\"],\"mappings\":\"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\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 0);\\n\",\"/* Unit test passed on 18/10/05\\r\\nlet a = Matrix.rotate(1).multiplyMatrix(Matrix.translate(0.2,-0.3))\\r\\n////a=Matrix.translate(10,-20)\\r\\nconsole.log('ori:\\\\n'+a)\\r\\n////console.log('multi&divide:\\\\n'+a.multiplyNumber(2)+'\\\\n\\\\n'+a.divideByNumber(2))\\r\\nconsole.log('inverse:\\\\n'+a.inverseMatrix())\\r\\nconsole.log('invertwice:\\\\n'+a.inverseMatrix().inverseMatrix())\\r\\nconsole.log('product:\\\\n'+a.multiplyMatrix(a.inverseMatrix()) )\\r\\n*/\\r\\nexport class Matrix {\\r\\n    data: Float64Array\\r\\n    static Unit: Matrix = new Matrix(\\r\\n        1, 0, 0,\\r\\n        0, 1, 0,\\r\\n        0, 0, 1)\\r\\n    constructor(a1: number, a2: number, a3: number, b1: number, b2: number, b3: number, c1: number, c2: number, n3: number) {\\r\\n        this.data = new Float64Array(9)\\r\\n        for (let i = 0; i < 9; i++) {\\r\\n            this.data[i] = arguments[i]\\r\\n        }\\r\\n    }\\r\\n\\r\\n    static make(nums: Float64Array) {\\r\\n        const vals = new Float64Array(9)\\r\\n        for (let i = 0; i < 9; i++) {\\r\\n            vals[i] = i < nums.length ? nums[i] : 0;\\r\\n        }\\r\\n        return new Matrix(vals[0], vals[1], vals[2], vals[3], vals[4], vals[5], vals[6], vals[7], vals[8])\\r\\n    }\\r\\n\\r\\n    static translate(dx: number, dy: number): Matrix {\\r\\n        return new Matrix(1, 0, 0,\\r\\n            0, 1, 0,\\r\\n            dx, dy, 1);\\r\\n    }\\r\\n\\r\\n    static rotate(angle: number): Matrix {\\r\\n        return new Matrix(Math.cos(angle), -Math.sin(angle), 0,\\r\\n            Math.sin(angle), Math.cos(angle), 0,\\r\\n            0, 0, 1);\\r\\n    }\\r\\n\\r\\n    static zoom(ratio: number): Matrix {\\r\\n        return new Matrix(ratio, 0, 0,\\r\\n            0, ratio, 0,\\r\\n            0, 0, 1);\\r\\n    }\\r\\n\\r\\n    det/* erminant */(): number {\\r\\n        //11*22*33 + 12*23*31 + 13*21*32  -  13*22*31 - 11*23*32 - 12*21*33\\r\\n        return this.pos(0, 0) * this.pos(1, 1) * this.pos(2, 2)\\r\\n            + this.pos(0, 1) * this.pos(1, 2) * this.pos(2, 0)\\r\\n            + this.pos(0, 2) * this.pos(1, 0) * this.pos(2, 1)\\r\\n            - this.pos(0, 2) * this.pos(1, 1) * this.pos(2, 0)\\r\\n            - this.pos(0, 0) * this.pos(1, 2) * this.pos(2, 1)\\r\\n            - this.pos(0, 1) * this.pos(1, 0) * this.pos(2, 2)\\r\\n    }\\r\\n\\r\\n    inverseMatrix(): Matrix {\\r\\n        console.log('det : ' + this.det())\\r\\n        return this.adjugateMatrix().divideByNumber(this.det())\\r\\n    }\\r\\n\\r\\n    transposeMatrix(): Matrix {\\r\\n        return new Matrix(this.pos(0, 0), this.pos(1, 0), this.pos(2, 0),\\r\\n            this.pos(0, 1), this.pos(1, 1), this.pos(2, 1),\\r\\n            this.pos(0, 2), this.pos(1, 2), this.pos(2, 2))\\r\\n    }\\r\\n\\r\\n    minor(r: number, c: number): number {\\r\\n        let result = new Float64Array(4)\\r\\n        let k = 0\\r\\n        for (let i = 0; i < 3; i++) {\\r\\n            if (i == r) { continue }\\r\\n\\r\\n            for (let j = 0; j < 3; j++) {\\r\\n                if (j == c) { continue }\\r\\n\\r\\n                result[k] = this.pos(i, j)\\r\\n                k++\\r\\n            }\\r\\n        }\\r\\n        console.log('minor :  [ ' + result.toString() + ' ] ')\\r\\n        //11*22 - 12*21\\r\\n        //[0,1\\r\\n        // 2,3]\\r\\n        return result[0] * result[3] - result[1] * result[2]\\r\\n    }\\r\\n\\r\\n    cofactor(r: number, c: number) {\\r\\n        let sign = r + c\\r\\n        return this.minor(r, c) * (sign % 2 == 1 ? -1 : 1)\\r\\n    }\\r\\n\\r\\n\\r\\n    adjugateMatrix(): Matrix {\\r\\n        return new Matrix(this.cofactor(0, 0), this.cofactor(1, 0), this.cofactor(2, 0),\\r\\n            this.cofactor(0, 1), this.cofactor(1, 1), this.cofactor(2, 1),\\r\\n            this.cofactor(0, 2), this.cofactor(1, 2), this.cofactor(2, 2))\\r\\n    }\\r\\n\\r\\n    add(tgt: Matrix) {\\r\\n        let result = new Float64Array(9)\\r\\n        for (let i = 0; i < 9; i++) {\\r\\n            result[i] = this.data[i] + tgt.data[i]\\r\\n        }\\r\\n    }\\r\\n\\r\\n    multiplyMatrix(tgt: Matrix): Matrix {\\r\\n        let result = new Float64Array(9)\\r\\n        for (let i = 0; i < 3; i++) {\\r\\n            for (let j = 0; j < 3; j++) {\\r\\n                result[i * 3 + j] = Matrix.dotProduct(this.row(i), tgt.col(j))\\r\\n            }\\r\\n        }\\r\\n        //console.log(result.toString())\\r\\n        return Matrix.make(result)\\r\\n    }\\r\\n\\r\\n    multiplyNumber(num: number): Matrix {\\r\\n        return Matrix.make(this.data.map(ele => ele * num))\\r\\n    }\\r\\n\\r\\n    divideByNumber(num: number): Matrix {\\r\\n        return Matrix.make(this.data.map(ele => ele / num))\\r\\n    }\\r\\n\\r\\n    row(n: number): [number, number, number] {\\r\\n        return [this.data[3 * n], this.data[3 * n + 1], this.data[3 * n + 2]]\\r\\n    }\\r\\n\\r\\n    col(n: number): [number, number, number] {\\r\\n        return [this.data[n], this.data[3 + n], this.data[6 + n]]\\r\\n    }\\r\\n\\r\\n    pos(r: number, c: number) {\\r\\n        return this.data[r * 3 + c];\\r\\n    }\\r\\n\\r\\n    private static dotProduct(a: [number, number, number], b: [number, number, number]): number {\\r\\n        return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\\r\\n    }\\r\\n\\r\\n    toString(): string {\\r\\n        return '[' + this.row(0) + '\\\\n' + this.row(1) + '\\\\n' + this.row(2) + ']'\\r\\n    }\\r\\n}\\r\\n\",\"import {Matrix} from './matrix'\\r\\nexport {Shape,Pair,Dot,Vector}//Classes\\r\\nexport {dotProduct,dis,dis_sqr,len,opr}//utils\\r\\n\\r\\ninterface Pair{\\r\\n    x : number\\r\\n    y : number\\r\\n}\\r\\n\\r\\nfunction toPair(p : [number,number]) : Pair{\\r\\n    return {x : p[0], y : p[1]}\\r\\n}\\r\\n\\r\\ninterface Transformation{\\r\\n    transformMatrix : Matrix\\r\\n    transform(m : Matrix)\\r\\n    pos() : Dot\\r\\n}\\r\\n\\r\\nfunction len(p : Pair){\\r\\n    return Math.sqrt(p.x * p.x + p.y * p.y)\\r\\n}\\r\\n\\r\\nfunction dotProduct(a : Pair, b : Pair){\\r\\n    return a.x * b.x + a.y * b.y\\r\\n}\\r\\n\\r\\nfunction dis_sqr(a : Pair, b : Pair){\\r\\n    let dx = a.x - b.x\\r\\n    let dy = a.y - b.y\\r\\n    return (dx * dx + dy * dy)\\r\\n}\\r\\n\\r\\n\\r\\nfunction dis (a : Pair, b : Pair){\\r\\n    return Math.sqrt(dis_sqr(a,b))\\r\\n}\\r\\n\\r\\nfunction opr(a : Pair, b : Pair, op : (a:number,b:number) => number){\\r\\n    return {x : op(a.x,b.x), y : op(a.y,b.y)}\\r\\n}\\r\\n\\r\\nfunction transform(m : Matrix){\\r\\n    return m.inverseMatrix()\\r\\n}\\r\\n\\r\\nabstract class Shape{\\r\\n    constructor(public readonly id : string){}\\r\\n    \\r\\n    abstract sdf(d:Dot) : number\\r\\n    asdf(d : [number,number] ) : number{\\r\\n        return this.sdf(new Dot(d[0], d[1]))\\r\\n    }\\r\\n}\\r\\n\\r\\nclass Dot extends Shape{\\r\\n    static origin : Dot = new Dot(0,0)\\r\\n    \\r\\n    constructor(public readonly x : number, public readonly y : number){super('Dot')}\\r\\n\\r\\n    sdf(d : Dot) : number{\\r\\n        return dis(this, d)\\r\\n    }\\r\\n\\r\\n    center() : Dot{\\r\\n        return this\\r\\n    }\\r\\n\\r\\n    static toDot(p : Pair){\\r\\n        return new Dot(p.x,p.y)\\r\\n    }\\r\\n}\\r\\n\\r\\nclass Vector{\\r\\n\\r\\n    constructor(public readonly x : number, public readonly y : number){}\\r\\n    \\r\\n    static form(_b : Dot, _e : Dot) : Vector{\\r\\n        let x = _e.x - _b.x\\r\\n        let y = _e.y - _b.y\\r\\n        return new Vector(x,y)\\r\\n    }\\r\\n\\r\\n    length() : number{\\r\\n        return len(this)\\r\\n    }\\r\\n\\r\\n    static toVector(p:Pair):Vector{\\r\\n        return new Vector(p.x,p.y)\\r\\n    }\\r\\n}\\r\\n\",\"import {Shape,Dot,Vector} from './geomath'\\r\\nimport {dis,dis_sqr,dotProduct,len,opr} from './geomath'\\r\\nexport {Line, Segment,Capsule,Circle}\\r\\n\\r\\n//fundamental\\r\\nclass Segment extends Shape{\\r\\n    constructor(public readonly a : Dot, public readonly b : Dot){super('Segment')}\\r\\n\\r\\n    form(_b : Dot, _way : Vector){\\r\\n        return new Segment(_b, Dot.toDot( opr(_b, _way, (a,b)=>a+b ) )  )\\r\\n    }\\r\\n\\r\\n    length() {\\r\\n        return dis(this.a,this.b)\\r\\n    }\\r\\n\\r\\n    sdf(d : Dot){\\r\\n        let dis1_sqr = dis_sqr(d,this.a)\\r\\n        let dis2_sqr = dis_sqr(d,this.b)\\r\\n        let len_sqr = dis_sqr(this.a,this.b)\\r\\n        let cos_val = ( dis1_sqr - dis2_sqr + len_sqr ) * ( dis2_sqr - dis1_sqr + len_sqr )\\r\\n        if(cos_val <= 0){\\r\\n            //Dun4 jiao3 san1 jiao3 xing2\\r\\n            return Math.sqrt(Math.min(dis1_sqr,dis2_sqr))\\r\\n        }else{\\r\\n            return Math.abs(Line._dd(this.a,this.b).sdf(d))\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nclass Line extends Shape{\\r\\n    constructor(public readonly A : number, \\r\\n                public readonly B : number, \\r\\n                public readonly C : number){super('Line')}\\r\\n\\r\\n    sdf(d : Dot) : number{\\r\\n        return this.takein(d) / len({x : this.A, y : this.B})\\r\\n    }\\r\\n\\r\\n    takein(d : Dot){\\r\\n        return this.A * d.x + this.B * d.y + this.C\\r\\n    }\\r\\n\\r\\n    static _dn(d : Dot, n : Vector) : Line{\\r\\n        //d : (m,n) , n : (a,b) , l : a(x-m)+b(y-n)=0\\r\\n        return new Line(n.x, n.y, -dotProduct(d,n))\\r\\n    }\\r\\n\\r\\n    static _da(d : Dot, a : Vector) : Line{\\r\\n        //d : (m,n) , a : (a,b) , l : (x-m) / a = (y-n) / b\\r\\n        return new Line(-a.y, a.x, -dotProduct(d,a))\\r\\n    }\\r\\n\\r\\n    static _dd(a : Dot, b : Dot) : Line{\\r\\n        return this._da( a, Vector.form(a, b) )\\r\\n    }\\r\\n\\r\\n    static _dk(d : Dot, k : number) : Line{\\r\\n        //d : (m,n) , k , y - n = k * ( x - m )\\r\\n        return this._kb(k, -k * d.y + d.x)\\r\\n        //equivalent : new Line(1, -k, m * k - n)\\r\\n    }\\r\\n\\r\\n    static _kb(k : number,b : number) : Line{\\r\\n        //k , b , y = k * x + b\\r\\n        return new Line(1, -k, b)\\r\\n    }\\r\\n}\\r\\n\\r\\n//derivations\\r\\nclass Capsule extends Shape{\\r\\n    constructor(public readonly segment : Segment,\\r\\n                public readonly radius : number){super('Capsule')}\\r\\n\\r\\n    sdf(d:Dot){\\r\\n        return this.segment.sdf(d) - this.radius\\r\\n    }\\r\\n}\\r\\n\\r\\nclass Circle extends Shape{\\r\\n    constructor(public readonly center : Dot,public readonly radius : number){super('Circle')}\\r\\n\\r\\n    sdf(d:Dot){\\r\\n        return this.center.sdf(d) - this.radius\\r\\n    }\\r\\n}\\r\\n\\r\\n/*\\r\\nfunction ngon(n,r){\\r\\n    let pi = 3.14\\r\\n    return (x,y)=>{\\r\\n        if(n<=2)\\r\\n            return 1\\r\\n        const angle = Math.atan2(y,x);\\r\\n        const div = 2 * pi / n;\\r\\n        let i = Math.floor(angle/div)\\r\\n        let j = i + 0.5\\r\\n        const mpr = r * Math.cos(div/2)\\r\\n        let mp = new Dot(mpr * Math.cos(j * div), mpr * Math.sin(j * div))\\r\\n        let line = Line._dn(mp, Vector.toVector(mp))\\r\\n        return line.sdf(new Dot(x,y))\\r\\n    }\\r\\n}\\r\\n*/\\r\\n\",\"import {Matrix} from './matrix'//class\\r\\nimport {Shape,Pair,Dot,Vector} from './geomath'//fundamental shapes\\r\\nimport {dotProduct,dis,dis_sqr,len,opr} from './geomath'//methods\\r\\nimport {Line, Segment,Capsule,Circle} from './shapes'//additional shapes\\r\\n\\r\\nexport {Matrix}\\r\\nexport {Shape,Pair,Dot,Vector}\\r\\nexport {Line, Segment,Capsule,Circle}\\r\\n\\r\\ntype flex = number | Dot\\r\\n\\r\\ntype flexout = Dot | Circle | Segment\\r\\ntype out = Dot & Circle & Segment\\r\\n\\r\\ntype candy = (a : flex, b : flex) => flexout\\r\\n\\r\\nlet helper : candy = (a : flex, b : flex) => {\\r\\n    if(typeof b == 'number'){\\r\\n        if(typeof a == 'number'){\\r\\n            return new Dot(a,b)\\r\\n        }else{\\r\\n            return new Circle(a,b)\\r\\n        }\\r\\n    }else{\\r\\n        if(a instanceof Dot ){\\r\\n            return new Segment(a,b)\\r\\n        }else{\\r\\n            throw 'helper function _() cannot call upon (a : number, b: Dot)'\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\nexport let _ = (a:flex,b:flex) => <out>(helper(a,b))\",\"import { Shape,Dot,Segment,Capsule,Circle,Vector,Line,_ } from './geo/pack';\\r\\n\\r\\ntype Canvas = HTMLCanvasElement\\r\\ntype Context2D = CanvasRenderingContext2D\\r\\ntype Text = HTMLTextAreaElement\\r\\n\\r\\n//Regularize the coordinate \\r\\n\\t\\t\\t\\t/*\\r\\n\\t\\t\\t\\t@----------->x (0,width)\\t  => \\t  \\t    y (-1,1)\\r\\n\\t\\t\\t\\t|\\t\\t\\t\\t\\t\\t\\t  \\t    \\t\\t^\\r\\n\\t\\t\\t\\t|\\t\\t\\t\\t\\t\\t\\t \\t \\t        |\\r\\n\\t\\t\\t\\t|\\t\\t\\t\\t\\t\\t\\t\\t \\t\\t   \\t|\\r\\n\\t\\t\\t\\t|\\t\\t\\t\\t\\t\\t\\t\\t \\t--------@------>x (-1,1)\\r\\n\\t\\t\\t\\tv\\t\\t\\t\\t\\t\\t\\t\\t \\t \\t    |\\r\\n\\t\\t\\t\\ty (0,height)\\t\\t\\t\\t\\t \\t   \\t\\t|\\r\\n\\t\\t\\t\\t*/\\r\\n\\r\\nfunction init_canvas(cvs_id : string) : Coordinate{\\r\\n\\tlet cvs : Canvas = getCanvas(cvs_id)\\r\\n\\tconst w = cvs.width,\\r\\n\\t\\t  h = cvs.height\\r\\n\\tlet ctx : Context2D = cvs.getContext('2d')!\\r\\n\\tctx.imageSmoothingEnabled = false\\t\\t\\t//pixel level rendering\\r\\n\\tlet data = ctx.getImageData(0,0,w,h)\\r\\n\\tlet pixels = data.data\\r\\n\\tlet i = 0\\t\\t\\t//pointer counting the pixels\\r\\n\\t//let cmd : string = (<Text>document.getElementById('cmd')).value\\r\\n\\t\\r\\n\\treturn new Coordinate(ctx,w,h)\\r\\n}\\r\\n\\r\\nfunction threshold(x1 : number, x2 : number, val : number) : number{\\r\\n    val = (val - x1) / (x2 - x1)\\r\\n    val = Math.min(val, 1)\\r\\n    val = Math.max(val, 0)\\r\\n    return val\\r\\n}\\r\\n\\r\\nclass Coordinate{\\r\\n\\tconstructor(private ctx : Context2D, \\r\\n\\t\\t\\t\\tpublic readonly width : number, \\r\\n\\t\\t\\t\\tpublic readonly height : number){}\\r\\n\\r\\n\\tprivate axis(){\\r\\n\\t\\tconst [w, h] = [this.width, this.height]\\r\\n\\r\\n\\t\\tthis.ctx.fillStyle ='#e51c23'\\r\\n\\t\\tthis.ctx.fillRect(Math.floor(w*0.5)-1, 0, 2, h)  //y\\r\\n\\t\\tthis.ctx.fillRect(0, Math.floor(h*0.5)-1, w, 2)  //x\\r\\n\\t\\t\\r\\n\\t\\tconst [weight,length,step]=[1,0.005,20]\\r\\n\\t\\tfor(let i = 0; i <= step; i++){\\r\\n\\t\\t\\tthis.ctx.fillRect(Math.floor(w*(0.5-length)), Math.floor(i*(h/step)-weight/2), \\r\\n\\t\\t\\t\\t\\t\\t\\tMath.floor(w*2*length), weight)  //y\\r\\n\\t\\t\\tthis.ctx.fillRect(Math.floor(i*(w/step)-weight/2), Math.floor(h*(0.5-length)), \\r\\n\\t\\t\\t\\t\\t\\t\\tweight, Math.floor(h*2*length))  //x\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\tprivate toRelXY(absX : number, absY : number){\\r\\n\\t\\tconst [half_w , half_h] = [this.width * 0.5, this.height * 0.5]\\r\\n\\t\\treturn [(absX - half_w) / half_w, (half_h - absY) / half_h]\\r\\n\\t}\\r\\n\\r\\n\\tprivate toAbsXY(relX : number, relY : number){\\r\\n\\t\\tconst [half_w , half_h] = [this.width * 0.5, this.height * 0.5]\\r\\n\\t\\treturn [(relX * half_w) + half_w, half_h - (half_h * relY)]\\r\\n\\t}\\r\\n\\r\\n\\trenderSDF(shapes : Shape[]){\\r\\n\\t\\tconst [w, h] = [this.width, this.height]\\r\\n\\r\\n\\t\\tlet i : number = 0//pointer\\r\\n\\r\\n\\t\\tlet data = this.ctx.getImageData(0,0,w,h)\\r\\n\\t\\tlet pixels = data.data\\r\\n\\t\\tfor(let shape of shapes){\\r\\n\\t\\t\\tfor(let absY = 0; absY < h; absY++){\\r\\n\\t\\t\\t\\tfor(let absX = 0; absX < w; absX++){\\r\\n\\t\\t\\t\\t\\tlet [x,y] = this.toRelXY(absX,absY)//Regularize the coordinate \\r\\n\\t\\t\\t\\t\\tlet ret = shape.sdf(new Dot(x,y))//calculate\\r\\n\\t\\t\\t\\t\\tret = 255 - threshold(-0.001,0.001,ret) * 255//fill the pixel by R G B A\\r\\n\\t\\t\\t\\t\\tpixels.blend_pixel(i, new Color(ret,ret,ret,255))//Accumulate the pointer\\r\\n\\t\\t\\t\\t\\ti++\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t\\tthis.ctx.putImageData(data,0,0)\\r\\n\\t\\t}\\r\\n\\t\\tthis.axis()\\r\\n\\t}\\r\\n}\\r\\n\\r\\ndeclare global {\\r\\n\\tinterface Uint8ClampedArray{\\r\\n\\t\\tfill_pixel(index : number, color : Color) : void\\r\\n\\t\\tblend_pixel(index : number, color : Color) : void\\r\\n\\t}\\r\\n}\\r\\n\\r\\nUint8ClampedArray.prototype.fill_pixel = function (i : number, color : Color) : void{\\r\\n\\tthis[4*i]   = color.R\\r\\n\\tthis[4*i+1] = color.G\\r\\n\\tthis[4*i+2] = color.B\\r\\n\\tthis[4*i+3] = color.A\\r\\n}\\r\\n\\r\\nUint8ClampedArray.prototype.blend_pixel = function (i :number, color : Color) : void{\\r\\n\\tlet alpha = color.A / 255.0\\r\\n\\tthis[4*i]   += color.R * alpha\\r\\n\\tthis[4*i+1] += color.G * alpha\\r\\n\\tthis[4*i+2] += color.B * alpha\\r\\n\\tthis[4*i+3] = 255\\r\\n}\\r\\n\\r\\nclass Color{\\r\\n\\tconstructor(public readonly R:number,\\r\\n\\t\\t\\t\\tpublic readonly G:number,\\r\\n\\t\\t\\t\\tpublic readonly B:number,\\r\\n\\t\\t\\t\\tpublic readonly A:number){}\\r\\n}\\r\\n\\r\\nfunction getCanvas(cvs_id : string) : Canvas{\\r\\n\\treturn <Canvas>document.getElementById(cvs_id)\\r\\n}\\r\\n\\r\\nfunction save(cvs_id : string) : void{\\r\\n\\tlet cvs = getCanvas(cvs_id)\\r\\n\\tlet url = cvs.toDataURL()\\r\\n\\tconsole.log(url)\\r\\n}\\r\\n\\r\\nfunction main() {//the entry that register everything\\r\\n\\tconsole.log(\\\"main loaded\\\")\\r\\n\\r\\n\\tlet painter=init_canvas('cvs')\\r\\n\\t\\r\\n\\tlet shape_list : Shape[]=[]\\r\\n\\tshape_list.push(new Capsule(_(_(0,0), _(0.2,0.1)), 0.1))\\r\\n\\tshape_list.push(_(_(-0.5,0), 0.1))\\r\\n\\r\\n\\tlet savebtn = document.getElementById('save')\\r\\n\\tsavebtn!.addEventListener('click',()=>{\\r\\n\\t\\tsave('cvs')\\r\\n\\t})\\r\\n\\t\\r\\n\\tlet dobtn = document.getElementById('do')\\r\\n\\tdobtn!.addEventListener('click',()=>{\\r\\n\\t\\tpainter.renderSDF(shape_list)\\r\\n\\t})\\r\\n\\t\\r\\n\\tpainter.renderSDF(shape_list)\\r\\n}\\r\\n\\r\\nmain()\"]}","code":"!function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){\"use strict\";s.r(e);class r{constructor(t,e,s,r,i,n,o,a,h){this.data=new Float64Array(9);for(let t=0;t<9;t++)this.data[t]=arguments[t]}static make(t){const e=new Float64Array(9);for(let s=0;s<9;s++)e[s]=s<t.length?t[s]:0;return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}static translate(t,e){return new r(1,0,0,0,1,0,t,e,1)}static rotate(t){return new r(Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1)}static zoom(t){return new r(t,0,0,0,t,0,0,0,1)}det(){return this.pos(0,0)*this.pos(1,1)*this.pos(2,2)+this.pos(0,1)*this.pos(1,2)*this.pos(2,0)+this.pos(0,2)*this.pos(1,0)*this.pos(2,1)-this.pos(0,2)*this.pos(1,1)*this.pos(2,0)-this.pos(0,0)*this.pos(1,2)*this.pos(2,1)-this.pos(0,1)*this.pos(1,0)*this.pos(2,2)}inverseMatrix(){return console.log(\"det : \"+this.det()),this.adjugateMatrix().divideByNumber(this.det())}transposeMatrix(){return new r(this.pos(0,0),this.pos(1,0),this.pos(2,0),this.pos(0,1),this.pos(1,1),this.pos(2,1),this.pos(0,2),this.pos(1,2),this.pos(2,2))}minor(t,e){let s=new Float64Array(4),r=0;for(let i=0;i<3;i++)if(i!=t)for(let t=0;t<3;t++)t!=e&&(s[r]=this.pos(i,t),r++);return console.log(\"minor :  [ \"+s.toString()+\" ] \"),s[0]*s[3]-s[1]*s[2]}cofactor(t,e){let s=t+e;return this.minor(t,e)*(s%2==1?-1:1)}adjugateMatrix(){return new r(this.cofactor(0,0),this.cofactor(1,0),this.cofactor(2,0),this.cofactor(0,1),this.cofactor(1,1),this.cofactor(2,1),this.cofactor(0,2),this.cofactor(1,2),this.cofactor(2,2))}add(t){let e=new Float64Array(9);for(let s=0;s<9;s++)e[s]=this.data[s]+t.data[s]}multiplyMatrix(t){let e=new Float64Array(9);for(let s=0;s<3;s++)for(let i=0;i<3;i++)e[3*s+i]=r.dotProduct(this.row(s),t.col(i));return r.make(e)}multiplyNumber(t){return r.make(this.data.map(e=>e*t))}divideByNumber(t){return r.make(this.data.map(e=>e/t))}row(t){return[this.data[3*t],this.data[3*t+1],this.data[3*t+2]]}col(t){return[this.data[t],this.data[3+t],this.data[6+t]]}pos(t,e){return this.data[3*t+e]}static dotProduct(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}toString(){return\"[\"+this.row(0)+\"\\n\"+this.row(1)+\"\\n\"+this.row(2)+\"]\"}}function i(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function n(t,e){return t.x*e.x+t.y*e.y}function o(t,e){let s=t.x-e.x,r=t.y-e.y;return s*s+r*r}function a(t,e){return Math.sqrt(o(t,e))}r.Unit=new r(1,0,0,0,1,0,0,0,1);class h{constructor(t){this.id=t}asdf(t){return this.sdf(new c(t[0],t[1]))}}class c extends h{constructor(t,e){super(\"Dot\"),this.x=t,this.y=e}sdf(t){return a(this,t)}center(){return this}static toDot(t){return new c(t.x,t.y)}}c.origin=new c(0,0);class u{constructor(t,e){this.x=t,this.y=e}static form(t,e){let s=e.x-t.x,r=e.y-t.y;return new u(s,r)}length(){return i(this)}static toVector(t){return new u(t.x,t.y)}}class l extends h{constructor(t,e){super(\"Segment\"),this.a=t,this.b=e}form(t,e){return new l(t,c.toDot(function(t,e,s){return{x:s(t.x,e.x),y:s(t.y,e.y)}}(t,e,(t,e)=>t+e)))}length(){return a(this.a,this.b)}sdf(t){let e=o(t,this.a),s=o(t,this.b),r=o(this.a,this.b);return(e-s+r)*(s-e+r)<=0?Math.sqrt(Math.min(e,s)):Math.abs(d._dd(this.a,this.b).sdf(t))}}class d extends h{constructor(t,e,s){super(\"Line\"),this.A=t,this.B=e,this.C=s}sdf(t){return this.takein(t)/i({x:this.A,y:this.B})}takein(t){return this.A*t.x+this.B*t.y+this.C}static _dn(t,e){return new d(e.x,e.y,-n(t,e))}static _da(t,e){return new d(-e.y,e.x,-n(t,e))}static _dd(t,e){return this._da(t,u.form(t,e))}static _dk(t,e){return this._kb(e,-e*t.y+t.x)}static _kb(t,e){return new d(1,-t,e)}}class f extends h{constructor(t,e){super(\"Capsule\"),this.segment=t,this.radius=e}sdf(t){return this.segment.sdf(t)-this.radius}}let p=(t,e)=>{if(\"number\"==typeof e)return\"number\"==typeof t?new c(t,e):new class extends h{constructor(t,e){super(\"Circle\"),this.center=t,this.radius=e}sdf(t){return this.center.sdf(t)-this.radius}}(t,e);if(t instanceof c)return new l(t,e);throw\"helper function _() cannot call upon (a : number, b: Dot)\"},y=(t,e)=>p(t,e);function x(t,e,s){return s=(s-t)/(e-t),s=Math.min(s,1),s=Math.max(s,0)}class m{constructor(t,e,s){this.ctx=t,this.width=e,this.height=s}axis(){const[t,e]=[this.width,this.height];this.ctx.fillStyle=\"#e51c23\",this.ctx.fillRect(Math.floor(.5*t)-1,0,2,e),this.ctx.fillRect(0,Math.floor(.5*e)-1,t,2);const[s,r,i]=[1,.005,20];for(let n=0;n<=i;n++)this.ctx.fillRect(Math.floor(t*(.5-r)),Math.floor(n*(e/i)-s/2),Math.floor(2*t*r),s),this.ctx.fillRect(Math.floor(n*(t/i)-s/2),Math.floor(e*(.5-r)),s,Math.floor(2*e*r))}toRelXY(t,e){const[s,r]=[.5*this.width,.5*this.height];return[(t-s)/s,(r-e)/r]}toAbsXY(t,e){const[s,r]=[.5*this.width,.5*this.height];return[t*s+s,r-r*e]}renderSDF(t){const[e,s]=[this.width,this.height];let r=0,i=this.ctx.getImageData(0,0,e,s),n=i.data;for(let o of t){for(let t=0;t<s;t++)for(let s=0;s<e;s++){let[e,i]=this.toRelXY(s,t),a=o.sdf(new c(e,i));a=255-255*x(-.001,.001,a),n.blend_pixel(r,new w(a,a,a,255)),r++}this.ctx.putImageData(i,0,0)}this.axis()}}Uint8ClampedArray.prototype.fill_pixel=function(t,e){this[4*t]=e.R,this[4*t+1]=e.G,this[4*t+2]=e.B,this[4*t+3]=e.A},Uint8ClampedArray.prototype.blend_pixel=function(t,e){let s=e.A/255;this[4*t]+=e.R*s,this[4*t+1]+=e.G*s,this[4*t+2]+=e.B*s,this[4*t+3]=255};class w{constructor(t,e,s,r){this.R=t,this.G=e,this.B=s,this.A=r}}function g(t){return document.getElementById(t)}!function(){console.log(\"main loaded\");let t=function(t){let e=g(t);const s=e.width,r=e.height;let i=e.getContext(\"2d\");return i.imageSmoothingEnabled=!1,i.getImageData(0,0,s,r).data,new m(i,s,r)}(\"cvs\"),e=[];e.push(new f(y(y(0,0),y(.2,.1)),.1)),e.push(y(y(-.5,0),.1)),document.getElementById(\"save\").addEventListener(\"click\",()=>{!function(t){let e=g(t).toDataURL();console.log(e)}(\"cvs\")}),document.getElementById(\"do\").addEventListener(\"click\",()=>{t.renderSDF(e)}),t.renderSDF(e)}()}]);","extractedComments":[]}